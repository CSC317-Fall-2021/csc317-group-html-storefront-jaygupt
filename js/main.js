var data = {
  "products": [
    {
      "name": "Captain America",
      "price": 15.78,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/action_figures/captain_america.jpeg",
      "pageURL": "captain_america.html",
      "category": "Action Figures",
    },
    {
      "name": "Batman",
      "price": 29.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/action_figures/batman.jpg",
      "pageURL": "batman.html",
      "category": "Action Figures"
    },
    {
      "name": "Spider-Man",
      "price": 28.88,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/action_figures/spider_man.jpeg",
      "pageURL": "spider_man.html",
      "category": "Action Figures"
    },
    {
      "name": "Superman",
      "price": 25.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/action_figures/superman.jpg",
      "pageURL": "superman.html",
      "category": "Action Figures"
    },
    {
      "name": "Iron Man",
      "price": 13.33,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/action_figures/iron_man.jpg",
      "pageURL": "iron_man.html",
      "category": "Action Figures"
    },
    {
      "name": "The Flash",
      "price": 21.89,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/action_figures/the_flash.png",
      "pageURL": "the_flash.html",
      "category": "Action Figures"
    },
    {
      "name": "Chess",
      "price": 25.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/board_games/chess.jpeg",
      "pageURL": "chess.html",
      "category": "Board Games"
    },
    {
      "name": "Chutes and Ladders",
      "price": 9.39,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/board_games/chutes_and_ladders.jpg",
      "pageURL": "chutes_and_ladders.html",
      "category": "Board Games"
    },
    {
      "name": "Labyrinth",
      "price": 12.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/board_games/labyrinth.jpeg",
      "pageURL": "labyrinth.html",
      "category": "Board Games"
    },
    {
      "name": "Life",
      "price": 22.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/board_games/life.jpg",
      "pageURL": "life.html",
      "category": "Board Games"
    },
    {
      "name": "Monopoly",
      "price": 21.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/board_games/monopoly.jpeg",
      "pageURL": "monopoly.html",
      "category": "Board Games"
    },
    {
      "name": "Sorry",
      "price": 26.49,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/board_games/sorry.jpg",
      "pageURL": "sorry.html",
      "category": "Board Games"
    },
    {
      "name": "Alphabet Blocks",
      "price": 18.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/building_blocks/alphabet_blocks.jpeg",
      "pageURL": "alphabet_blocks.html",
      "category": "Building Blocks"
    },
    {
      "name": "Legos",
      "price": 20.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/building_blocks/legos.jpeg",
      "pageURL": "legos.html",
      "category": "Building Blocks"
    },
    {
      "name": "Lincoln Logs",
      "price": 27.29,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/building_blocks/lincoln_logs.jpg",
      "pageURL": "lincoln_logs.html",
      "category": "Building Blocks"
    },
    {
      "name": "Magnetic Tiles",
      "price": 28.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/building_blocks/magnetic_tiles.jpg",
      "pageURL": "magnetic_tiles.html",
      "category": "Building Blocks"
    },
    {
      "name": "Pilo Blocks",
      "price": 32.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/building_blocks/pilo_blocks.jpg",
      "pageURL": "pilo_blocks.html",
      "category": "Building Blocks"
    },
    {
      "name": "Wooden Blocks",
      "price": 14.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/building_blocks/wooden_blocks.jpeg",
      "pageURL": "wooden_blocks.html",
      "category": "Building Blocks"
    },
    {
      "name": "Apples to Apples",
      "price": 29.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cards/apples_to_apples.jpeg",
      "pageURL": "apples_to_apples.html",
      "category": "Cards"
    },
    {
      "name": "Game of Thrones",
      "price": 19.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cards/game_of_thrones.jpeg",
      "pageURL": "game_of_thrones.html",
      "category": "Cards"
    },
    {
      "name": "Go Fish",
      "price": 9.59,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cards/go_fish.jpg",
      "pageURL": "go_fish.html",
      "category": "Cards"
    },
    {
      "name": "Kings in the Corner",
      "price": 18.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cards/kings_in_the_corner.jpg",
      "pageURL": "kings_in_the_corner.html",
      "category": "Cards"
    },
    {
      "name": "Spot It",
      "price": 14.59,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cards/spot_it.jpeg",
      "pageURL": "spot_it.html",
      "category": "Cards"
    },
    {
      "name": "Uno",
      "price": 12.39,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cards/uno.jpeg",
      "pageURL": "uno.html",
      "category": "Cards"
    },
    {
      "name": "Hot Wheels",
      "price": 19.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cars_and_motorcycles/hot_wheels.jpeg",
      "pageURL": "hot_wheels.html",
      "category": "Cars and Motorcycles"
    },
    {
      "name": "Lightning McQueen",
      "price": 19.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cars_and_motorcycles/lightning_mcqueen.jpg",
      "pageURL": "lightning_mcqueen.html",
      "category": "Cars and Motorcycles"
    },
    {
      "name": "Motorbike",
      "price": 22.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cars_and_motorcycles/motorbike.jpeg",
      "pageURL": "motorbike.html",
      "category": "Cars and Motorcycles"
    },
    {
      "name": "RC Car",
      "price": 39.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cars_and_motorcycles/rc_car.jpeg",
      "pageURL": "rc_car.html",
      "category": "Cars and Motorcycles"
    },
    {
      "name": "RC Motorcycle",
      "price": 28.49,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cars_and_motorcycles/rc_motorcycle.jpeg",
      "pageURL": "rc_motorcycle.html",
      "category": "Cars and Motorcycles"
    },
    {
      "name": "Ride-On Car",
      "price": 499.99,
      "description": "Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi dolore officiis consequuntur laborum ad dolorem veritatis tenetur praesentium saepe fugiat! Laboriosam laborum veniam architecto aliquam commodi adipisci doloribus, quis sapiente earum voluptatem quas voluptate fugiat! Error officiis odio praesentium dolorum?",
      "imageSrc": "images/product_images/cars_and_motorcycles/ride_on_car.jpeg",
      "pageURL": "ride_on_car.html",
      "category": "Cars and Motorcycles"
    }
  ]
}

const productsArray = data.products;

// Returns name, price, description, imageSrc, and category given the name of the product
function findProduct(productName) {
  for (let i = 0; i < productsArray.length; i++) {
    if (productsArray[i]["name"] == productName) {
      return productsArray[i];
    }
  }
}

// returns corresponding category folder
const categoryToFolder = {
  "Action Figures": "action_figures",
  "Board Games": "board_games",
  "Building Blocks": "building_blocks",
  "Cards": "cards",
  "Cars and Motorcycles": "cars_and_motorcycles"
}

// TODO: Use in cart.html when merging revise-pages branch
function getLinkToProductPage(productName) {
  const productInformation = findProduct(productName);
  const productCategory = productInformation["category"];
  const productPageURL = productInformation["pageURL"];
  const productCategoryFolder = categoryToFolder[productCategory];
  
  const linkToProductPage = `product_pages/${productCategoryFolder}/${productPageURL}`;

  return linkToProductPage;
}

// query for similar products array: same category, and doesn't include the product itself
function findSimilarProducts(productName) {
  const productInformation = findProduct(productName);

  // find product's category
  const productCategory = productInformation["category"];

  var similarProducts = [];
  
  // use product category to loop through JSON object, adding products that are of the same 
  // category, but aren't the product itself
  for (var i = 0; i < productsArray.length; i++) {
    if (productsArray[i]["category"] == productCategory && productsArray[i]["name"] != productName) {
      similarProducts.push(productsArray[i]["name"]);
    }
  }

  /* 
    Get 3 Random Elements from similarProducts, to be put on the product page 
    Solution From: https://stackoverflow.com/questions/19269545/how-to-get-a-number-of-random-elements-from-an-array
  */
  const shuffledSimilarProducts = similarProducts.sort(() => 0.5 - Math.random());

  // get sub-array containing 3 elements
  const threeRandomSimilarProducts = shuffledSimilarProducts.slice(2);

  return threeRandomSimilarProducts;
}

/* Alerts when Leaving Page and Search Input has Content (Beginning) */
// get the product search input element
if (document.getElementById("productSearch") !== null) {
  const beforeUnloadListener = (event) => {
    event.preventDefault();

    // custom message can't be modified
    return event.returnValue = "Leave site?";
  };

  const productSearchInput = document.getElementById("productSearch");

  // add an event listener such that an alert triggers if search has content 
  // and window is being closed/going to a new tab
  productSearchInput.addEventListener("input", event => {
    if (event.target.value !== "") {
        // add the event listener
        addEventListener("beforeunload", beforeUnloadListener, {capture: true});
    } else {
        // remove the event listener when search is empty
        removeEventListener("beforeunload", beforeUnloadListener, {capture: true});
    }
  });
}
/* Alerts when Leaving Page and Search Input has Content (Ending) */